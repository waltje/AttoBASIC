NEW
5 REM 74HC299 TEST
10 SDB0; SBB0# SS=1 -> SELECT HC299
15 SDB6; SBB6# OE=1 -> HI-Z
20 SBB7; SDB7# (S0=1) S1=1 -> READ DATA
25 SPM 2# SPI TO MODE 2
30 FOR N=0 15# LOOP DIGIT TO DISPLAY
35 GOS 60#WRITE TO BUS
40 GOS 70#READ FROM BUS
45 NEXT
50 SPS
55 END
60 CBB6; CBB7; PRI "N="; PRI N; SPW N# S1=0 -> SHIFT RIGHT OE=0 -> OUT TO BUS
65 SLP4; SBB7; SBB6; RET# WAIT, S1=1, OE=1 THEN RETURN
70 SPW 0; CBB7; PRI "DATA: "; PRX SPR; SBB7; RET#DUMMY WRITE, S1=0, PRINT BUS DATA, S1=1 THEN RETURN
75# SEQUENCE TO READ BUS;
80# 1) S1=1, OE=1
85# 2) DUMMY WRITE
90# 3) S1=0 TO ENABLE SHIFTING
95# 4) READ DATA FROM BUS
100# 5) S1=1 TO END READ BUS
